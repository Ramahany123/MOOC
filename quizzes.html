<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>French MOOC - Interactive Quizzes</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="styles/quizzes.css">
</head>

<body>

  <div class="mooc-container">
    <header class="mooc-header">
      <h1>Évaluation Interactive</h1>
      <p>Test your knowledge with our interactive quizzes.</p>
    </header>

    <main class="mooc-content">
      <!-- Quiz Selection Menu -->
      <div id="quiz-selection">
        <h2>Quiz Selection</h2>
        <p>Please choose a quiz to begin.</p>
        <div class="quiz-menu">
          <!-- Buttons will be generated by JavaScript -->
        </div>
      </div>

      <!-- Main Quiz Area -->
      <div id="quiz-container">
        <div id="quiz-header">
          <h2 id="quiz-title"></h2>
          <span id="quiz-progress"></span>
        </div>
        <p id="question-text"></p>
        <div id="answer-container"></div>
        <div id="feedback"></div>
        <button id="quiz-action-btn" style="display: none;">Next</button>
      </div>

      <!-- Results Screen -->
      <div id="results-container">
        <h2>Quiz Complete!</h2>
        <p id="score-text"></p>
        <div class="results-actions">
          <button id="restart-quiz-btn" class="results-btn restart-btn">Try Again</button>
          <button id="back-to-menu-btn" class="results-btn menu-btn">Back to Menu</button>
        </div>
      </div>

    </main>

    <footer class="mooc-footer">
      <a href="home.html">&larr; Back to Main Menu</a>
    </footer>
  </div>

   <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
        import { getDatabase } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCnCovkec0YaXmgpcnNLx1qiCpGG7-iipU",
            authDomain: "educational-site-f1fac.firebaseapp.com",
            projectId: "educational-site-f1fac",
            storageBucket: "educational-site-f1fac.firebasestorage.app",
            messagingSenderId: "868437050505",
            appId: "1:868437050505:web:8ca5d61feee67a67647258"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        
        // Initialize the Realtime Database and make it global
        window.db = getDatabase(app); 
        window.auth = auth;
        
        // Determine the current user and make UID globally available for the quiz script
        onAuthStateChanged(auth, (user) => {
            window.currentUserId = user ? user.uid : null;
            if (!user) {
                console.warn("User not authenticated. Quiz results will not be saved.");
                // Optional: Redirect to login or show an alert.
            }
        });
    </script>
    
  <script src="js/quizzes.js" type="module"></script>


</body>

</html>